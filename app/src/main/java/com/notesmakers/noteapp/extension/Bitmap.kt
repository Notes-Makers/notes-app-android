package com.notesmakers.noteapp.extension

import android.graphics.Bitmap
import android.graphics.BitmapFactory
import android.util.Base64
import java.io.ByteArrayOutputStream

/***
 * Decode Base64 to Bitmap format
 */
fun String.decodeImage(): Bitmap {
    val byteArray =
        takeIf { isNotBlank() }?.let { Base64.decode(it, Base64.DEFAULT) } ?: Base64.decode(
            errorBitmap,
            Base64.DEFAULT
        )
    return BitmapFactory.decodeByteArray(byteArray, 0, byteArray.size)
}

const val errorBitmap =
    "iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAFxVJREFUeJztnXm0VtV1wH/f4wEPDAphUKMMTkFUsE6YxGjTaKw2NcYhDrGtbawx6bJxSI0hA1UTx6qhJg5tmrAabaxRrAMVtYIaQQMqjtGqJIBilYiizDzgff1jv2/5fH7vnn3vd+85d9i/tc7C5XvvnH3Pufuec/bZZ28wDMMwDMMwDMMwDMMwDMMwDMMoJ7XQAlSEocBYYBQwAhje/e9QYCAwoLsM7P79zh5lA/AOsLL737eBZcBrwHvenqCimIKkR39gPDARmNT93zsB4xBFyIJVwKvAy8ALwIs9/t2YUZuVwhQkGTVkRjiou3wS2BNRkjzQCTwNLOguc4HFQSUqKKYgekYAhwNHAIcCHwsrTmyWAHO6y/3AW0GlMUrBx4HvAfOBLqBektKFzCrndT+jYajZGZiCLFFCv8i+yjOIsuyYQv8ZJWQgcBKy/Aj9soaeWWYDJ/O+Rc2oMOOAq4AVhH8581b+AFza3UeVpaqb9MnAN4HjgTbPbdeRM423kXONdYhJtnHuAWINa5yNDAGGAR/t/te3vF3AbcAVwJOe245iKPBu1o1USUFqwGeBqcAhGbf1LvAscibxe8SCtBg5s3gb2JKw3jbksHEMMBr5uo8H9uguw1qQWcNs4BJkKRqSYcAs4BOB5SgNBwMPkc1SZA3wAHAh8Hlkoxviw1NDTM9HAz8E7kMOErN45jnI2U8IhgFPAJsDtV8qJiIvSpovxybkBfkWsC/Q7u1p4tMOHIhY5R5AlnBp9sVMYC9vT/O+ctQxBWmJkcD1yFImjRdhFfAL4BhkT1BUtgFOAG5CloFp9M1m4MfIHilLeiqHKUhC2oGzSGfwNwA3I0uWDp8P4YkO4FhgBmIkaLW/3ga+TjZGhGHA473aMwWJySQ+3IlJynPAN8j+i5gnhiHP/AKt99+jiF9amrI1G1dTECUdwMXI3iDpoHYhX9KDqJZlrzc1xMI3g9ZcazqBixAzdSsMpe+PnimIgknA8yQfyHXAT4BdfQteAHZD9nEbSN6/TyHm5yREKYcpiIM24GySr503ANOA7XwLXkC2B64heV+vR5ZvcfYmLuUwBYlgFMlNt5uRr6I55cVnDPBTklsG/xvdvk6jHKYgfTAZuWqaZIDuJfl0b7zPRORMJckYLAH2j6hbqxymIL2oAV8l2TS/CDnhrvLmO21qiPl7CfHHYyNwepM6hyK3H+OsBgzkbOMGki2nLgMG+Re5MmwFXEmyZdePgH7d9cRVDlOQbrZGlkZxO38hsE8AeavKvohzZtxxmok4XcZVDlMQZCP9DPE6rQtx1MtL8IQqMRBxiY97fpL0/KrSCjKe+JvxpWTvxm64OYTkhhRTEAWTgOXE66y7yC72lBGfESRbGpuCONgfuWUXZ0n1XfzfsjPctCERYbKKBlM5BdkfCaWp7aCVwJ8GkdSIwxeA1ZiCtMRExF1a2zmLgQlBJDWSMJFkZyamIEjgsjh7jgXAtkEkNZKS5JzDFAQx5caxeNwDDA4iqZGULJSjEgqyNfHOOW6j9fsFhl+yUo7SK0h/4pkBbyTfwRGMD5OlcpRaQWrE8626ETPjFo04XrmmIL34KvpOmIHNHEXDh3KUVkEmo3dZvwfbcxSNvgIsmIIoGIXeYrUAs1YVDZ/KUToFaUN/TXYxds5RNHwrR+kU5Gx0D70SOyEvGr0jHpqCxGQSun1HF+ZbVTRCKUdpFKQDfdyq7wWS0UhGSOUojYJcjO5h78LOOorEUOA3yEsaqhQ+D/ze6K5TLsUuOxkVox2dVWMLktzGMCrFWeiWVheHEtAwQjESXX6OhVj0ESPnZOHndBGSySiKLcBpyB6lynQAnwMOQ1KZjUA+Hm8heUr+BwnzWfV+Kg2T0EXZuyyUgDlhAJLjUHOTchlwJua0WQo07iSvUO1woLuQLArhY0gWW6OgHIxuoP88lIA5YHdk+ZT0cGwxsIN3qY2WqaHLQ34v1Y2yPgT4Ha2fID+OGTcKx6G4B3Yz1c7PcT2tK0ejmFtONEORUEO54WHcg3p9MOnC8ynSU446kkJuN69PUBwad+HvCy1Ig8noBrSqa+f+iMk2TQWpIybgqi5X+6J3oIiobFbeuAX3YE4LJl14zkf/0t8BzIrx+6d4fI680+zS1s1BJQJ2wn3usY7qZpPdGXl+zcv+LDLbDEasVZq/WY4uMWbZ6etG42YkQU8wrmoiVO/yk2DShaWGfjboAj7R42+PUP5dHfjX7B8l17jupVwSSrCBwIoIwRoDv0soAQNzAvqX/Nomf39zjL8/KMPnyDM13MHplhMoOs5JDsHqSFyrKjIUeAPdy/1/NPdd2w65o6+p43mqGyLpLtz9c2IIweYoBKvql+1a9F//4yPqiRNk79sZPEcR0JzBeTf57qwQ6jmqaYY8EH1WpbuJ7qM2YK6yrvXIuFSNGvAS0X3ThefN+hSHQHXgGz4Fygn90UesXwOMUdS5J9CprLOqrjzn4u6b83wK9LRDmA1U0/z4D+iXROfGqPeHMeoNst4OzCjc8Q+e9CXMeIcgdXJwQBOAscBadC/xk8S73zEIuSagqfsNqhkE4w7cfbOrD0G+pxDkaB+C5IgaMBPdC7wF2C9BG4cp668D1yV/lMKiMat/04cg8x1CrEKuklaJ49C/vK243dyobKP3wWMVGIw7m+7crIUYgdtCc2PWQuSMrYHX0b24ryH3QpIyEn024Geo3r2RX+GevTPdG3/ZIUAdOCZLAXLINehnjy+k0N5XYrTn1XKTA07G3ScnZCnALxyNb6K1L2TROAD9mcftKbWpvb1ZR4wG41JqtwgMQxwUo/rkZ1k1XsO9lHgwq8ZzSDsS20vzoq4i3fswu6PP1DWTap2N/Jro/vh9Vg2PczRcR0LZVIVz0C91zsyg/QtitH9cBu3nle/j7o+xWTR8iqLhfbNoOIeMRk7CNS/nfKCfo75RwNXAU8isdFX3/4tiIG4Xi0Z5HTEmVAHN9eaTs2j4Okeja6hOcDPNoVQdWQ/v7ahrB+DVJn+7DPeX7jNKOeqIMaEK9Md9SS2TvnjK0egDWTSaQ76I/qW8QlHfLyP+XrOx/7lSli7EqFAFHsQ9q6dKf9wOcxem3WgOGYI+U+8SYCtHfW1Ef+024l6eDUcfjG4h1ZjlLyG6H9aTcj/s5WiwDnw+zQZzyo/Qzx5HKuobpKhnoKKev4wh1zmK+orOsbj7Yc80G9QcwOyYZoM5ZF90gbnrwH8q66zhPkfRpKarIUtcjWxrCBzIwAPjcPfDSWk2eKmjsZWU29beD30e8HeJF8Ulyn9oS4x6dkOuGWhkvCNGvUWkBrxHdB+kuiW43dHYw2k2lkP+Hv0S5oyYdb8ZUdeGmHV9N4acX4xZd9GYR/Tz35JmYy4LVpnDiu6AnIRrXrp5xM/WuyiivtUx6xoA/FYpa6uOk3nHZd17QlOJdjDHOX6e2fF9DvhndC/SZmT26IpZ/9qIn8XNLNWJfgbbkXJbHl92/Dy1+/tDcX+NvpRWYznjKPRLlqQJSaOWAssT1vkvSpm3UF7vB01YqlS8C/ZWNJSLIMEpsxWSw13zoi0iedas+yPqXZawzmFE7216lsdxn7UUkU/ifvbdXZVollgunyAQV4mycQG6qCMAX0MOn5KwJuJnSZN3rgTOVv7u/sDfJWwnz2g+Lql4WLvOQLoo3xdob9z3Chql1RuUUddoXevoKGpIGCDNM6Ttjp8HBuJ+budZiGYGGe74+Uri2evzTj9kDa9R+neIF76nGVnMICAvwNfRzWxDEGNEmdiInElF4Xq3VQoywvHztxV1FIkzkOiIGs5D/KBaIU0rVm8Wo7dUHUf5EqyudPzceT9doyCuGEvvKOooCtsjXgMaHgamp9BmVjNIg6uR3CMarsXtYFkkXAryEVcFGgVxOcutU9RRFKahM/11IhvzegptZjmDNOo4A52sYxDjRFmI6ltQfAw0CuIKq79RUUcROBJ9xItLgf9Nqd2sZxCA36D3djgH9yWvouD6eA92VZCGgnQq6sg7g9FHI3wJ/TJMQ9YzSIPvIGFJXcQxUuQd17vpvBOSxhKrDAoyFX14nDNId9b0MYOAeLdqI+4fiOQmKTqbHT93BtbT3jWIIo11eEgmoo/ZOp30PZd9zSAgGb9mKn/3MsRoUWRc77fzeEKjIK5KijwVtyHLCc31yxVkE6nQ1wwC8jE7E51hZWvkBmWRaXn1o1GQlqepHHM64rOj4RyyOfPxOYOA+Jd9X/m7JyIZd4uKS0GcS2WNgrhOYp2WgJyyHbKM0DAb+I+M5PA5gzS4Brnjo+E6ijvGXhSkZVtyTrkaXaKZDaR35tGMVRE/c/V9UjYjm3DN3ZWd0M84ecOl2KkYW1zpv15MoxHPHI7+nsd3MpalhiQ8bdZ21omIpvXRbu+yCYlsUzSaBeTrWVLJDOxKkJj0Uk8oBgG/Q/di+Mo/vj8fzvtxHdkHwogT5yvJdeLQuFLinZ5GI6c6GtlCsSxZcRJi+szzPgI5Y5mCxJf1xdHo+yOVF8oTmphjqeSyOVLR0LZpNOSBOCmVbwgkYwhcUWsaZSXFGevRuJ/n4DQa0ly5TZKU0jdtwCPoXoQ3qVam2B3RR265KZCMcfk07mdxXrnVMELR0LFpNJQxp6FfSlQx13ic2F+fCyRjHDThWJPGEfgANdybHS/pdVtgFHJvRTP491DuKJF90Q9YgK6PXiGllytDphL9DBrHTTV9mSGLsl535VZslHWEy+k3GTEpT0F/ozFt/gj9XfwfBJJRy3Si5X8szcZcCWMeSrOxlDkU/dIhRFbYdpoP5k34MTH35somsjQrncCEAPJpmU+0/Den2dhljsZWkM9lSQcSGUQz4E8Txq8syuysdYVJk62Q3CaaPvs1+Twb6Yd7WzA1zQb/ytFYHfhYmg2mxIXoBroLWeL4poPoXIerCTOL/FmETL3LVwLI52I33HKncgbSYB9Fg3mLiLE7+jOPHweU0SXbroFk+5VCtjriATAykIx9oUmgs0uaDQ5E/HGiGsxTIOQasi/SDPAywmWAdZnQuwh3HrM97hwbjfLvgWTsiyuIlncNGSwNXSkQ7k+7wRb4a/RLhFSn2gTcR9+y3R1QLpDAc9p+/JNAMjbDlRvk0SwavcHR6Cry4ZM1AjEaaAb1TsIbF3ZCZrHesi0lfKq0NsQcqunLl9DlU8yaDsSNPUrWK7No+FRHo3XyEeV9OroBXU34F7DBSMRiNR8J0XMxiqh/npiIe3ndKP8YSMaeaFxMMlk17KJo+PwsGo7BZ9AvCc4KI2IhceWobJSNwPhAMja4ALecmowFsanhvjswJ4uGldSAJ/uQq3d5gnwsB4vCYPR3aO4NJGMD1wFhKxHznUSF6q8jZtVQFqGDHbI1SpmzKmVJnFuYEwPJOAJ3Wu1Y+TTjmrruc/y8P9KRIThe+XvTgIVZClJS7gd+qfzdUN7Qh+M2uszKUoBRuL8eWUX/cLFQIdtSFBG9jT7ZFrk05erneYHkm+GQqxMP4+9a472HmNp8s9ohV538nfYXkb/F3c8rAsg1BAlRFSXXbB+CTHEIUcf/4VsN99rzvzzLVFY0NzM3BJDryw6Z6kjwv8yZoBDkNh+C9OJdh0x/E0CmstKIE9ZXCRHp5i6HTHXkanEskp4iP0u0paIT8e71mZ5tAXBAxM838H6cJCM5bcBYor2MHwEO8SMOIH5jrxFtup9LgiANmqDNzbiZaAUZAJyChLj0xWyiFaQD+LgnWarOA57bOxX3udYtPgRpMBb3dPZb/Po5jce9D7GSfdmEPr98GrQBixwybSZAKofZDqHqwB97lunnCpmsZFt8p5M+TCHTnZ5lAuAvFILd7lmmoehdIqykX57DfyT4WQq5jvIsEyBrepdb+SP4dyffBTkQDP2yVK28iP9r13sp5Hqd5HvtlvmnCMHmEc4vayQ6s5+VdMqNhBnr6QrZgoYnGoc4/+VJOXpyGJKTT3s33Yq+rEPurWszdKXNWNzj2kmLm/M0lj+38kFHwUeRtF2rU6g7LbZGPHjHI/uUIqeNC8lGxBfrReQKtibXYVb8GxJONorp5CDqyoG8r7FzEZ8Yw8iSXdFFgNwzlIC9mY0ph+GPm3Arxz3BpGvCREw5DD8cgG6PFCq+sWEEo4bscV3KMTOUgIYREo1Lex27Um1UkG2QQz+XcswIJaBhhOQ63MrRSbhYxoYRjIPQLa2uCCWgYYRiEHIw6VKO5eTDe8MwvHINutnDrlQblUObyGcOGXmN+3BFr5GPMJ9d3cUoBqOQ+yWuOLobgElI5t1C0o4/D9O+irnBFIt2ZFbQjO23A8mYGqEVxJSjeLgyRDXK45TAMzukgphyFI/j0Y3tGiRZZ+EJpSCmHMVjP9zpmxsl+D2PtAihIKYcxWMM8Aa68b2N8KnzUsO3gphyFI9tgOfRje/L3b9fGnwqiClH8RgMPIxufNcikUxKhS8FMeUoHgPRxbVqlFCJeTLFh4KYchSPdtwJb3qWy8OImT1ZK4gpR/EYSDzluJX46QILQ5YKYspRPAYTb1n1KOLRW1qyUhBTjuKxDfAQ+jFehETJLDVZKMg8TDmKxhj0ptw6kuxobBBJPZOFgixBPDiNYrAf+kPAOvAmFUp2lNUSaw1wtMfnMJJxPHr3kTqSti8qe1npyHKT3gVMpcQWjgLTjt4rt+fMUSnlAD/nIPdRgc1cgRiF/j5Ho7xKhZZVPfF1kr4M/ynfjA9zJBJAIc7YLaIiG/JmtKIgcfN6dCFJfTq8PJnRk0HoAyz0LI9R8dk/qYLMRVJ6zUzwt88hlhPDDwehC83Tu9xKyQ8BNSRRkJ6HgP2AqxLUsQW4GvhIxs9XZbZBF/GwWbkcM64A8RWkrxPy05AIFnEHYilwDCW6YJMDakggaU2s3N5lLXCSf5HzSxwFcbmP7AcsjlFfzzIHO1xMgwPQpSBoVl4mR1mf8oJWQbS+VcOAu5V1Nlt2/YwKW0xaYFd0mZ36KrdRspuAaaFRkLiOhzXgTGC9ou5mpRO4FtihpSerBuOQj4omJ2CzsgYJC2pL3D5wKUgrXrkTgIWO+qPKRuCnSPZb44PshWSJbSWF9gJKEponS6IUJA2X9QHABbSeC/1O4FCq/aVrQ3LLx7mv0aysB86nBEHdfNCXgqR9n2MPxA2+lYGtAy8B5wLDU5Qt72wPTEFOtFvtvwexWSMWzRQkq8tObcDXgBVN2oxbOpFZ5UTkFlzZGIKYau8i+f6iZ1mO7TUS0VtBfNwEHAZMI52BrwOrgVuAU4CPZix7loxAlGIGyQ0czT4kl2PJaxLTU0F8X5OdANxBOi9Co2xG4jhNBT6N7IHySgci4wXAfMRXLc2+mIHlBGyZhoKEvEM+GbifdF+ORlmLrLsvRy4HjSXMMqMfsvY/FrmHMQ+x0mXxzHcD+/h5rLD4GMh25KL+kchSJSSHIJvRIzJuZzXivPcCsulfCryG3Hl4A9iUsN5ByDJpLLBTj7IHYpbNeq80C7gQmY0qgQ8FaQO2Irxy9GRv4FvIBjxE9qvVwErgne7/7uxRQOJGNcpgxKI2nDDGgk3ICfrVSNAFo0KMBi4iXkCBqpTXgR8gJmCj4vQHvoRc3d1C+JczVNmMmLaPQpbGhvEhtgPOBp4k/AvrqzyC+LbZbGHEYmdEWR4kvTOVPJROYDZwDrBjar1VQuzUU89w4LPd5VCK507xCqIUs5C7MWvCilMMTEGSMxr4FHLGMhm5zJWX+9VrgWeRi03zussfgkpUUExB0qM/MqtMQM4l9kDiPI0mu6gdbyJhWJcg5y7PIgErFiOn5kaLmIL4YTCy1h+N+HL1LB2Iu8oA5NyjC9kjbOxRViIhOVd0l7eQw8f1Ph/CMAzDMAzDMAzDMAzDMAzDMAzDKA//D229P3y2V2iLAAAAAElFTkSuQmCC"

/***
 * Encode Bitmap to Base64 format
 */
fun Bitmap.encodeImage(): String? {
    val baos = ByteArrayOutputStream()
    compress(Bitmap.CompressFormat.JPEG, 100, baos)
    val b: ByteArray = baos.toByteArray()
    return Base64.encodeToString(b, Base64.DEFAULT)
}